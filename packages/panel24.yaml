# Define a PWM output on the ESP32
output:
  - platform: ledc
    pin: GPIO27
    inverted: False
    id: gpio_backlight_pwm

light:
  - platform: monochromatic # Define a monochromatic, dimmable light for the backlight
    output: gpio_backlight_pwm
    name: Display_Backlight
    id: back_light
    restore_mode: ALWAYS_ON
    
spi:
  clk_pin: GPIO14
  mosi_pin: GPIO13
  miso_pin: GPIO12
  interface: hardware
  id: spiwd

touchscreen:
    platform: xpt2046
    id: touch
    cs_pin: 33
    interrupt_pin: 36
    update_interval: 50ms
    threshold: 400
    transform:
      mirror_x: true
      mirror_y: false
      swap_xy: true
    calibration:
      x_min: 352
      x_max: 3712
      y_min: 544
      y_max: 3508
    on_release:
      - if:
          condition: lvgl.is_paused
          then:
            - logger.log: "LVGL resuming"
            - lvgl.resume:
            - lvgl.widget.redraw:
            - light.turn_on: back_light
            
display:
  - platform: ili9xxx
    id: dp
    model: ili9341
    dc_pin: 2
    cs_pin: 15
    rotation: 90
    invert_colors: false
